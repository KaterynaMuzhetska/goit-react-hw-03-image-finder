{"version":3,"sources":["components/Searchbar/Searchbar.js","components/Modal/Modal.js","components/ImageGalleryItem/ImageGalleryItem.js","components/Button/Button.js","services/api.js","components/ImageGallery/ImageGallery.js","App.js","index.js"],"names":["Searchbar","state","searchName","handleNameChange","event","setState","currentTarget","value","toLowerCase","handleSubmit","preventDefault","props","onSubmit","className","this","type","autoComplete","autoFocus","placeholder","onChange","Component","modalRoot","document","querySelector","Modal","handleKeyDown","e","code","onClose","handleBackdropClick","target","window","addEventListener","removeEventListener","createPortal","onClick","children","ImageGalleryItem","largeImg","showModal","toggleModal","onImageClick","img","littleImage","largeImage","id","tags","src","alt","Button","api","handleApi","searchImages","page","fetch","then","response","ok","json","Promise","reject","Error","Status","ImageGallery","currentPage","images","error","status","onIncrementPage","prevProps","prevState","prevName","prevPage","nextPage","prev","hits","catch","scrollTo","top","documentElement","scrollHeight","behavior","color","height","width","timeout","map","image","webformatURL","largeImageURL","length","message","App","handleFormSubmit","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.1c6a38eb.chunk.js","sourcesContent":["import { Component } from 'react';\r\n\r\nexport default class Searchbar extends Component {\r\n  state = {\r\n    searchName: '',\r\n  };\r\n\r\n  handleNameChange = event => {\r\n    this.setState({ searchName: event.currentTarget.value.toLowerCase() });\r\n  };\r\n\r\n  handleSubmit = event => {\r\n    event.preventDefault();\r\n\r\n    this.props.onSubmit(this.state.searchName);\r\n    this.setState({ searchName: '' });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <header className=\"Searchbar\">\r\n        <form className=\"SearchForm\" onSubmit={this.handleSubmit}>\r\n          <button type=\"submit\" className=\"SearchForm-button\">\r\n            <span className=\"SearchForm-button-label\">Search</span>\r\n          </button>\r\n\r\n          <input\r\n            className=\"SearchForm-input\"\r\n            type=\"text\"\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            placeholder=\"Search images and photos\"\r\n            onChange={this.handleNameChange}\r\n            value={this.state.searchName}\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}","import { Component } from 'react';\r\nimport { createPortal } from 'react-dom';\r\n\r\nconst modalRoot = document.querySelector('#modal-root');\r\n\r\nexport default class Modal extends Component {\r\n  componentDidMount() {\r\n    window.addEventListener('keydown', this.handleKeyDown);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('keydown', this.handleKeyDown);\r\n  }\r\n\r\n  handleKeyDown = e => {\r\n    if (e.code === 'Escape') {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n\r\n  handleBackdropClick = event => {\r\n    if (event.currentTarget === event.target) {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n  render() {\r\n    return createPortal(\r\n      <div className=\"Overlay\" onClick={this.handleBackdropClick}>\r\n        <div className=\"Modal\">{this.props.children}</div>\r\n      </div>,\r\n      modalRoot,\r\n    );\r\n  }\r\n}","import { Component } from 'react';\r\n\r\nimport Modal from '../Modal';\r\n\r\nexport default class ImageGalleryItem extends Component {\r\n  state = {\r\n    largeImg: '',\r\n    showModal: false,\r\n  };\r\n\r\n  toggleModal = () => {\r\n    this.setState(({ showModal }) => ({\r\n      showModal: !showModal,\r\n    }));\r\n  };\r\n\r\n  onImageClick = img => {\r\n    this.setState({ largeImg: img });\r\n    this.toggleModal();\r\n  };\r\n\r\n  render() {\r\n    const { littleImage, largeImage, id, tags } = this.props;\r\n\r\n    return (\r\n      <>\r\n        <li\r\n          className=\"ImageGalleryItem\"\r\n          key={id}\r\n          id={id}\r\n          onClick={() => this.onImageClick(largeImage)}\r\n        >\r\n          <img\r\n            src={littleImage}\r\n            alt={tags}\r\n            className=\"ImageGalleryItem-image\"\r\n          />\r\n        </li>\r\n\r\n        {this.state.showModal && (\r\n          <Modal onClose={this.toggleModal}>\r\n            <img src={this.state.largeImg} alt=\"\" />\r\n          </Modal>\r\n        )}\r\n      </>\r\n    );\r\n  }\r\n}\r\n","const Button = ({ onClick }) => {\r\n  return (\r\n    <button onClick={onClick} type=\"button\" className=\"Button\">\r\n      Load more\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default Button;","function handleApi(searchImages, page) {\r\n    const baseURL = 'https://pixabay.com/api/';\r\n    const keyApi = '21844309-0bdc8d8d935c894ec75615f09';\r\n    return fetch(\r\n      `${baseURL}?q=${searchImages}&page=${page}&key=${keyApi}&image_type=photo&orientation=horizontal&per_page=12`,\r\n    ).then(response => {\r\n      if (response.ok) {\r\n        return response.json();\r\n      }\r\n      return Promise.reject(new Error(`Нет значения ${searchImages}`));\r\n    });\r\n  }\r\n  \r\n  const api = {\r\n    handleApi,\r\n  };\r\n  \r\n  export default api;","import { Component } from 'react';\r\n\r\nimport ImageGalleryItem from '../ImageGalleryItem';\r\nimport Button from '../Button';\r\nimport api from '../../services/api';\r\nimport ImageErrorView from '../ImageErrorView';\r\n\r\nimport Loader from 'react-loader-spinner';\r\n\r\nconst Status = {\r\n  IDLE: 'idle',\r\n  PENDING: 'pending',\r\n  RESOLVED: 'resolved',\r\n  REJECTED: 'rejected',\r\n};\r\n\r\nexport default class ImageGallery extends Component {\r\n  state = {\r\n    currentPage: 1,\r\n    images: [],\r\n    error: null,\r\n    status: Status.IDLE,\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.setState({\r\n      currentPage: 1,\r\n    });\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    const { searchImages } = this.props;\r\n    const { currentPage } = this.state;\r\n    const prevName = prevProps.searchImages;\r\n    const prevPage = prevState.currentPage;\r\n    const nextPage = currentPage;\r\n\r\n    if (prevName !== searchImages) {\r\n      this.setState({\r\n        currentPage: 1,\r\n        images: [],\r\n      });\r\n    }\r\n\r\n    if (\r\n      (prevName !== searchImages && currentPage === 1) ||\r\n      prevPage !== nextPage\r\n    ) {\r\n      this.setState({ status: Status.PENDING });\r\n\r\n      api\r\n        .handleApi(searchImages, currentPage)\r\n        .then(response => {\r\n          this.setState(prev => ({\r\n            images: [...prev.images, ...response.hits],\r\n            status: Status.RESOLVED,\r\n          }));\r\n        })\r\n        .catch(error =>\r\n          this.setState({ error: error, status: Status.REJECTED }),\r\n        );\r\n    }\r\n\r\n    window.scrollTo({\r\n      top: document.documentElement.scrollHeight,\r\n      behavior: 'smooth',\r\n    });\r\n  }\r\n\r\n  onIncrementPage = () => {\r\n    this.setState({ currentPage: this.state.currentPage + 1 });\r\n  };\r\n\r\n  render() {\r\n    const { images, status, error } = this.state;\r\n\r\n    if (status === 'idle') {\r\n      return (\r\n        <div className=\"startMessage\">Введите что-то в поисковой строке</div>\r\n      );\r\n    }\r\n\r\n    if (status === 'pending') {\r\n      return (\r\n        <div className=\"wrapperLoader\">\r\n          <Loader\r\n            type=\"ThreeDots\"\r\n            color=\"#00BFFF\"\r\n            height={100}\r\n            width={100}\r\n            timeout={3000} //3 secs\r\n          />\r\n        </div>\r\n      );\r\n    }\r\n\r\n    if (status === 'resolved') {\r\n      return (\r\n        <>\r\n          <ul className=\"ImageGallery\">\r\n            {images.map(image => (\r\n              <ImageGalleryItem\r\n                key={image.webformatURL}\r\n                littleImage={image.webformatURL}\r\n                largeImage={image.largeImageURL}\r\n                id={image.id}\r\n                tags={image.tags}\r\n              />\r\n            ))}\r\n          </ul>\r\n          {images.length > 0 && <Button onClick={this.onIncrementPage} />}\r\n        </>\r\n      );\r\n    }\r\n\r\n    if (status === 'rejected') {\r\n      <ImageErrorView message={error.message} />;\r\n    }\r\n  }\r\n}\r\n","import { Component } from 'react';\r\n\r\nimport Searchbar from './components/Searchbar';\r\nimport ImageGallery from './components/ImageGallery';\r\n\r\nimport './styles.css';\r\n\r\nclass App extends Component {\r\n  state = {\r\n    searchName: '',\r\n  };\r\n\r\n  handleFormSubmit = searchName => {\r\n    this.setState({ searchName });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"App\">\r\n        <Searchbar onSubmit={this.handleFormSubmit} />\r\n        <ImageGallery searchImages={this.state.searchName} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root'),\r\n);"],"sourceRoot":""}